### 只读存储器\(ROM\)

* 掩模ROM - MROM
  * 行列选择线交叉处有MOS管为"1"
  * 行列选择先交叉处无MOS管为"0"
* PROM - 一次性编程 - 可编程只读存储器
  * 熔丝断为"0"，熔丝不断为"1"
* EPROM\(多次性编程\) - 可擦除可编程只读存储器
  ![](/assets/js-14.2.4.3-1.png)
  * 紫外线全部擦洗
* EEPROM\(多次性编程\) - 电可擦洗可编程只读存储器
  * 电可擦写
  * 局部擦写
  * 全部擦写
* Flash Memory\(闪速型存储器\)
  * EPROM        价格便宜、集成度高
  * EEPROM       电可擦洗重写
  * 比EEPROM快    具备RAM功能

```
EPROM是可改写的，但它不能作为随机存储器
```

### 存储器容量的扩展

* 位扩展:增加存储字长

  ```
  用 2片 1kx4位 存储芯片组成 1kx8位的存储器

  1k = 10根地址线，8位 = 8根数据线
  ```

  ![](/assets/js-14.2.4.3-3.png)

  * 地址线-并联
  * 数据线-两个芯片数据线的集合
  * 片选端和读写端并联

* 字扩展:增加存储字的数量

  ```
  用 2片 1kx8位 存储芯片组成 2kx8位的存储器

  2k = 2^11 => 11根地址线
  8位 => 8位数据线
  ```

  ![](/assets/js-14.2.4.3-4.png)

  * 两个芯片不能同时工作，利用多余的一根地址线进行控制片选端的有效电平进而控制

  * 数据线并联，地址线并联，多余的一根地址线接在片选端上，并且接一个非门进行控制，前0000..00~0111..111的地址给第一块芯片，后1...0000~1...1111的地址给第二块芯片

* 位和字同时扩展

  ```
  用 4x2 片 1kx4位 存储芯片组成 4kx8位的存储器

  4k = 2^12 => 12根地址线
  8位 => 8根数据线
  ```

  ![](/assets/js-14.2.4.3-5.png)

  * 每2片芯片构成 1kx8位的 芯片，具有相同的片选端，再通过字扩展和译码器控制片选端的电平构成 4kx8位的存储器

### 存储器与CPU的连接

* 地址线的连接
  * 地址的低位作为地址，高位作为芯片选择信号
* 数据线的连接
* 读/写命令线的连接
* 片选线的连接
* 合理选择存储芯片
  * RAM - 用户程序区、系统运行的区域
  * ROM - 保存系统程序、保存配置信息
* 其他 时序、负载
  * 负载:CPU能带多少个芯片

---

* 系统程序区:ROM
* 用户程序区:RAM

### 存储器的校验

* 存储器的校验是为了能及时发现错误并及时纠正错误
* 合法代码集合
* 编码最小距离:任意两组合法代码之间的`二进制位数`的`最少差异`

  * 编码的纠错、检错能力与编码的最小距离有关
  * L-1=D+C\(D&gt;=C\)
  * L:编码的最小距离
  * D:检测错误的位数，具有一位纠错能力
  * C:纠正错误的位数

* 汉明码具有一位纠错能力的编码

### 汉明码的组成

* 汉明码采用奇偶校验
* 汉明码采用分组校验
* 汉明码的分组是一种非划分方式，组与组之间是有交叉的
* 组成汉明码三要素
  * 汉明码的组成需增添几位检测位
    ```
    2^k>=n+k+1
    ```
  * 检测为的位置
    ```
    2^i(i=0,1,2,3,...)
    ```
  * 检测为的取值
    ```
    检测位的取值与该为所在的检测"小组"承担的奇偶校验任务有关
    ```

```
C1 检测的小组位数为1,3,5,7,9,11,....位
C2 检测的小组位数为2,3,6,7,10,11,14,15,..位
C4 检测的小组位数为4,5,6,7,12,...位
```

```
例题:欲传送信息为b4b3b2b1(n=4)，根据2^k>=n+k+1，可求出配置汉明码需增添检测为k=3，且位置的安排如下:
1 2 3 4 5 6 7
C1C2b4C4b3b2b1

C1 = b4+b3+b1
C2 = b4+b2+b1
C4 = b3+b2+b1
```

```
汉明码纠错过程
P1 = C1+b4+b3+b1
P2 = C2+b4+b2+b1
P4 = C4+b3+b2+b1

不出错全为0，否则出错位为P4P2P1
如果检测出，数据位出错，则位数进行取反。检测为则不变


举例:
用汉明码采用“偶校验”进行校验时，如果的结果为011，表示出错的位置为3
```

```
补充:用汉明码进行分组时，位置的的二进制编码中从右往左数第一位与第三位均为1时表示这个位置是第一组和第三组共有的
```

* 配奇原则

  ```
  按配奇原则配置1001的汉明码(1110001)

  2^k>=n+k+1
  n = 4
  k = 3

  c1、c2、c4
  ```

### 提高访存速度的措施

* 采用高速器件
* 采用层次结构 Cache -- 主存
* 调整主存结构

#### 单体多字系统

* 增加存储器的贷款
* 前提:指令和数据在主存内必须是连续存放的，一旦遇到转移指令，或者操作数不能连续存放，这种方法的效果就不明显

```
一个四体并行低位交叉存储器，每个模块的容量是64K*32位，存取周期为200ns，在下述说法中__是正确的。

在200ns内，存储器能向CPU提供128位二进制信息
```

#### 多体并行系统

* 高位交叉
  * 高位地址表示体号，低位地址表示体内地址
* 低位交叉
  * 在不改变存取周期的前提下，增加存储器的带宽

#### 高速能存储芯片

* SDRAM\(同步DRAM\)
  * 在系统时钟的控制下进行读出和写入
  * CPU无须等待
* RDRAM
  * 主要解决存储器带宽问题
* 带Cache的DRAM



